<script src="/js/energyterm/nodeManage/plan/controller.js"></script>
<script src="/js/energyterm/nodeManage/plan/event.js"></script>





<script src="/js/energyterm/nodeManage/plan/model.js"></script>





<div class="plan_content" v-cloak v-if="onPage=='plan'">

    <!-- 头部 Start -->
    <div class="sitemap">

        <!-- 返回按钮Start -->
        <div class="backbtn" @click='isCenter?v.initPage("energybyproject"):(NodeManages.length?onPage="subOption":v.initPage("subOption"))'>
            I
        </div>
        <!-- 返回按钮End -->

        <!-- 面包屑文字Start -->
        <div class="map_index">
            <em style="cursor: pointer;" @click="isCenter?v.initPage('energybyproject'):v.initPage('more_build')">首页&nbsp;/&nbsp;</em>
            <em v-if="!isCenter" style="cursor: pointer;" @click='onPage="subOption"'>管理分项节点&nbsp;/&nbsp;</em>
            <span class="map_name">
                编辑{{NodeManageModel.buildingName}}计划管理节点
            </span>
        </div>
        <!-- 面包屑文字End -->

    </div>
    <!-- 头部 End -->

    <!-- 内容部分 Start -->
    <div class="contenter">

        <!-- 文字提示 Start -->
        <div class="title" v-if="NodeManageModel.nodes">
            已选计划管理节点：
            <i>{{IsCheckedList.length}}个</i>
        </div>
        <!-- 文字提示 End -->

        <!-- 节点集合 Start -->
        <div class="nodes" v-if="NodeManageModel.nodes">
            <span v-for="item in IsCheckedList" class="child" :title="item.energyItemName" v-text="item.energyItemName"></span>
        </div>
        <!-- 节点集合End -->

        <!-- 文字提示 Start -->
        <div class="tip">
            <i class="icon important">!</i>通过过点击
            <i class="icon add">J</i>
            <i class="icon add">-</i> 展开/收起分项树，系统自动选择当前分项树所有最末级节点为计划管理节点。
            <template v-if="NodeManageModel.isMain">
                其中标记
                <img class="imgicon" src="/images/energyterm/nodeManage/black.png"> 的节点为中心版的管理节点，建议不要选择这类节点的上级节点为计划管理节点。
            </template>
        </div>
        <!-- 文字提示 End -->

        <!--  树结构 Start -->

        <myplannode :plan_tree="PlanNodeEditTreeArray" :handler="handlerclick" :suboptiontop="suboptiontop" />

        <!--  树结构 End -->

    </div>
    <!-- 内容部分 End -->

    <!--  底部内容 Start -->
    <div class="bottomer">
        <div class="save" @click.capture="savePlanNode()">
            <pbutton-blue text="保存"></pbutton-blue>
        </div>
    </div>
    <!--  底部内容 End -->

</div>